import{A as e,r as t,j as s,J as a,aa as r,am as n,ao as o}from"./vendor-v8prtVom.js";import{C as i,O as c,u as l}from"./vendor-r3f-DvtW6edh.js";import{j as d,F as x,D as h}from"./vendor-three-B31tspNe.js";import{A as m,C as u}from"./index-DSRxZEhW.js";import"./vendor-radix-D7ebYKda.js";import"./vendor-gsap-z-v0fuE5.js";function f({position:e,index:a,isHovered:r,originalPosition:n,setHoveredIndex:o}){const i=t.useRef(null),[c,d]=t.useState(!1);return l(e=>{if(i.current){const t=e.clock.elapsedTime,s=i.current.position;if(c||r){const e=Math.sqrt(Math.pow(s.x-n[0],2)+Math.pow(s.y-n[1],2)+Math.pow(s.z-n[2],2)),a=.1*Math.sin(3*t+5*e),r=.2*Math.exp(2*-e)*Math.sin(4*t);s.x=n[0]+.9*(s.x-n[0])+a,s.y=n[1]+.9*(s.y-n[1])+r,s.z=n[2]+.9*(s.z-n[2])+.5*a;const o=1+.1*Math.sin(2*t);i.current.scale.setScalar(o)}else s.x+=.1*(n[0]-s.x),s.y+=.1*(n[1]-s.y),s.z+=.1*(n[2]-s.z),i.current.scale.setScalar(1)}}),s.jsxs("mesh",{ref:i,position:e,onPointerOver:e=>{e.stopPropagation(),d(!0),o(a)},onPointerOut:e=>{e.stopPropagation(),d(!1),o(null)},children:[s.jsx("sphereGeometry",{args:[.04,16,16]}),s.jsx("meshStandardMaterial",{color:c||r?"#61DAFB":"#4A90E2",emissive:c||r?"#61DAFB":"#4A90E2",emissiveIntensity:c||r?.8:.3})]})}function p({hoveredIndex:e,setHoveredIndex:a}){const r=t.useRef(null),n=t.useRef(null),[o,i]=t.useState(!1),{vertices:c,indices:m,uv:u}=t.useMemo(()=>function(){const e=[],t=[],s=[];for(let a=0;a<=32;a++){const t=a/32;for(let a=0;a<=32;a++){const r=a/32,n=2*(r-.5),o=t;let i=1-o,c=1;o<.2?(c=.7+1.5*o,i*=.8):o<.5?(c=1,i=1-.9*o):(c=1-.4*(o-.5),i=1.1*(1-o));const l=1.5*(i-.5),d=n*c*1.2;let x=0;const h=1.5*n,m=2*(o-.45),u=Math.sqrt(h*h+m*m);u<.3&&o>.35&&o<.65&&(x+=.35*Math.exp(8*-u)),Math.abs(n)>.3&&o>.4&&o<.6&&(x+=.15*Math.exp(-Math.pow(2*(Math.abs(n)-.5),2)-Math.pow(3*(o-.5),2)));const f=n-.25,p=n+.25,j=3*(o-.6),g=Math.min(Math.sqrt(f*f+j*j),Math.sqrt(p*p+j*j));g<.15&&o>.5&&o<.7&&(x-=.12*Math.exp(12*-g));const b=4*(o-.3),v=Math.sqrt(n*n+b*b);if(v<.2&&o>.25&&o<.4&&Math.abs(n)<.35&&(x-=.08*Math.exp(15*-v)),o>.7){const e=1.5*(o-.7);x+=Math.sin(Math.abs(n)*Math.PI)*e*.1}if(o<.3){const e=.8*Math.abs(n);x-=Math.sin(e*Math.PI)*(1-o)*.05}e.push(d,l,x),s.push(r,1-t)}}for(let a=0;a<32;a++)for(let e=0;e<32;e++){const s=33*a+e,r=s+1,n=s+33,o=n+1;t.push(s,r,n),t.push(r,o,n)}return{vertices:e,indices:t,uv:s}}(),[]),p=t.useMemo(()=>new Float32Array(c),[c]),j=t.useMemo(()=>{const e=[];for(let t=0;t<c.length;t+=3)e.push([c[t],c[t+1],c[t+2]]);return e},[c]);l(t=>{if(n.current&&r.current){const s=n.current.attributes.position,a=t.clock.elapsedTime;if(o||null!==e){for(let t=0;t<s.count;t++){const r=3*t,n=p[r],o=p[r+1],i=p[r+2];let c=1;if(null!==e){const t=j[e];c=Math.sqrt(Math.pow(n-t[0],2)+Math.pow(o-t[1],2)+Math.pow(i-t[2],2))}const l=.05*Math.sin(2*a+3*c),d=.15*Math.exp(1.5*-c)*Math.sin(3*a);s.setXYZ(t,n+l+.5*d,o+d,i+.7*l+.3*d)}s.needsUpdate=!0,n.current.computeVertexNormals()}else{for(let e=0;e<s.count;e++){const t=3*e,a=p[t],r=p[t+1],n=p[t+2],o=s.getX(e),i=s.getY(e),c=s.getZ(e);s.setXYZ(e,o+.1*(a-o),i+.1*(r-i),c+.1*(n-c))}s.needsUpdate=!0,n.current.computeVertexNormals()}}});const g=t.useMemo(()=>{const e=new d;return e.setAttribute("position",new x(c,3)),e.setAttribute("uv",new x(u,2)),e.setIndex(m),e.computeVertexNormals(),e},[c,m,u]);return t.useEffect(()=>{n.current&&(n.current=g)},[g]),s.jsxs("group",{onPointerOver:()=>i(!0),onPointerOut:()=>i(!1),children:[s.jsx("mesh",{ref:r,geometry:g,children:s.jsx("meshStandardMaterial",{color:"#4A90E2",wireframe:!0,transparent:!0,opacity:.6,emissive:"#4A90E2",emissiveIntensity:.2})}),s.jsx("mesh",{geometry:g,children:s.jsx("meshStandardMaterial",{color:"#61DAFB",transparent:!0,opacity:.15,side:h,emissive:"#61DAFB",emissiveIntensity:.1})}),j.map((t,r)=>s.jsx(f,{position:t,index:r,isHovered:e===r,originalPosition:t,setHoveredIndex:a},r))]})}function j({hoveredIndex:e,setHoveredIndex:t,autoRotate:a}){return s.jsxs(s.Fragment,{children:[s.jsx("ambientLight",{intensity:.8}),s.jsx("directionalLight",{position:[5,5,5],intensity:1}),s.jsx("directionalLight",{position:[-5,-5,-5],intensity:.5,color:"#61DAFB"}),s.jsx("pointLight",{position:[0,5,5],intensity:.8}),s.jsx(p,{hoveredIndex:e,setHoveredIndex:t}),s.jsx(c,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:3,maxDistance:15,autoRotate:a,autoRotateSpeed:.5,dampingFactor:.05})]})}function g({hoveredIndex:e,setHoveredIndex:a,autoRotate:r}){const[n,c]=t.useState(!1);return t.useLayoutEffect(()=>{if("undefined"==typeof window)return;const e=setTimeout(()=>c(!0),200);return()=>clearTimeout(e)},[]),n?s.jsx(t.Suspense,{fallback:s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o,{className:"h-8 w-8 animate-spin text-white mx-auto mb-4"}),s.jsx("p",{className:"text-white font-serif",children:"Loading 3D face model..."})]})}),children:s.jsx(i,{camera:{position:[0,0,6],fov:50},gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},dpr:"undefined"!=typeof window?[1,Math.min(window.devicePixelRatio||1,2)]:1,frameloop:"always",children:s.jsx(j,{hoveredIndex:e,setHoveredIndex:a,autoRotate:r})})}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o,{className:"h-8 w-8 animate-spin text-white mx-auto mb-4"}),s.jsx("p",{className:"text-white font-serif",children:"Initializing 3D face model..."})]})})}const b=()=>{const i=e(),[c,l]=t.useState(!1),[d,x]=t.useState(null),[h,f]=t.useState(!0);return t.useEffect(()=>{l(!0)},[]),s.jsxs(s.Fragment,{children:[s.jsx(m,{}),s.jsx(u,{}),s.jsx("main",{className:"relative min-h-screen pt-20 pb-16",children:s.jsxs("div",{className:"section-container",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("button",{onClick:()=>i("/test"),className:"flex items-center gap-2 px-4 py-2 border border-black/20 dark:border-border hover:bg-black dark:hover:bg-foreground hover:text-paper-cream dark:hover:text-background transition-all duration-200 font-serif text-sm text-black dark:text-foreground mb-6",children:[s.jsx(a,{size:18}),s.jsx("span",{children:"Back to Test Lab"})]}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-4xl sm:text-5xl font-serif font-bold text-black dark:text-foreground mb-2 flex items-center gap-3",children:[s.jsx(r,{className:"text-black dark:text-foreground"}),"3D Face Modeling"]}),s.jsx("p",{className:"text-lg text-ink-gray dark:text-muted-foreground font-serif",children:"Interactive 3D face mesh with fluid-like deformation on hover"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:()=>f(!h),className:"flex items-center gap-2 px-4 py-2 border border-black/20 dark:border-border hover:bg-black dark:hover:bg-foreground hover:text-paper-cream dark:hover:text-background transition-all duration-200 font-serif text-sm text-black dark:text-foreground",children:[s.jsx(n,{size:18}),s.jsx("span",{children:h?"Auto Rotate ON":"Auto Rotate OFF"})]})})]})]}),s.jsx("div",{className:"paper-card p-0 overflow-hidden mb-8",children:s.jsx("div",{className:"h-[700px] w-full bg-gradient-to-b from-black via-gray-900 to-black dark:from-background dark:via-background/95 dark:to-background relative",children:c?s.jsx(g,{hoveredIndex:d,setHoveredIndex:x,autoRotate:h}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(o,{className:"h-8 w-8 animate-spin text-white mx-auto mb-4"}),s.jsx("p",{className:"text-white font-serif",children:"Initializing 3D face model..."})]})})})}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"paper-card",children:[s.jsx("h2",{className:"text-2xl font-serif font-semibold text-black dark:text-foreground mb-4",children:"How to Use"}),s.jsxs("ul",{className:"space-y-3 text-body text-ink-gray dark:text-muted-foreground font-serif",children:[s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Hover over any vertex (dot)"})," to see fluid-like deformation"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Click and drag"})," to rotate the 3D face"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Scroll"})," to zoom in/out"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Watch the wave effects"})," ripple across the face mesh"]})]})]})]}),s.jsxs("div",{className:"paper-card",children:[s.jsx("h2",{className:"text-2xl font-serif font-semibold text-black dark:text-foreground mb-4",children:"Features"}),s.jsxs("ul",{className:"space-y-3 text-body text-ink-gray dark:text-muted-foreground font-serif",children:[s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Wireframe mesh"})," showing face structure"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Vertex points (dots)"})," at each mesh intersection"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Fluid deformation"})," with wave and ripple effects"]})]}),s.jsxs("li",{className:"flex gap-3",children:[s.jsx("span",{className:"text-black dark:text-foreground mt-1",children:"•"}),s.jsxs("span",{children:[s.jsx("strong",{children:"Smooth animations"})," for natural movement"]})]})]})]})]})]})})]})};export{b as default};
